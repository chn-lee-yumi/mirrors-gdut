<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Test large directory listing">
    <link rel="stylesheet" type="text/css" href="/Nginx-Fancyindex-Theme/gdut-mirrors/mirror.css" media="screen" />
    <title>Test Large Directory - GDUT Mirror</title>
</head>
<body>
    <!-- Include header -->
    <script>
        fetch('/Nginx-Fancyindex-Theme/gdut-mirrors/header.html')
            .then(r => r.text())
            .then(html => {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                // Extract body content only (skip DOCTYPE and html tags)
                const bodyContent = tempDiv.querySelector('body').innerHTML;
                // Find the fancyindex-list div and insert our table before footer
                const match = bodyContent.match(/(.*<div class="fancyindex-list">)(.*)/s);
                if (match) {
                    document.body.innerHTML = match[1] + document.getElementById('test-table').outerHTML;
                }
            });
    </script>
    
    <div id="test-table">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Last modified</th>
                    <th>Size</th>
                </tr>
            </thead>
            <tbody>
                <tr><td><a href="..">..</a></td><td>2024-01-20 15:30</td><td>-</td></tr>
                <!-- Generate 1000 test rows using JavaScript -->
                <script>
                    for (let i = 1; i <= 1000; i++) {
                        document.write(`<tr><td><a href="file${i}.txt">file${i}.txt</a></td><td>2024-01-20 ${String(i % 24).padStart(2, '0')}:${String(i % 60).padStart(2, '0')}</td><td>${Math.floor(Math.random() * 10000)} KB</td></tr>`);
                    }
                </script>
            </tbody>
        </table>
    </div>
    
    <!-- Include footer -->
    <script>
        fetch('/Nginx-Fancyindex-Theme/gdut-mirrors/footer.html')
            .then(r => r.text())
            .then(html => {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                document.body.insertAdjacentHTML('beforeend', tempDiv.querySelector('body').innerHTML);
            });
    </script>
</body>
</html>
